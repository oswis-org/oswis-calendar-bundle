{% if range is defined and range %}
    <div class="row" itemprop="offer" itemscope itemtype="http://schema.org/Offer">
        <div class="col-12">
            <div class="card-deck">
                <div class="card mt-2 mb-4">
                    {% if range.rangeActive %}
                        <a href="{{ path('oswis_org_oswis_calendar_web_event_participant_registration', {'eventSlug': event.slug}) }}" itemprop="url">
                            <div class="card-header p-2">
                                <h5 class="card-title mb-0" itemprop="name">
                                    {% block range_preview_title %}
                                        <small>
                                            <strong>
                                                <div class="d-inline d-md-none">{{ range.shortName|default('Přihláška na '~event.shortName|default) }}</div>
                                                <div class="d-none d-md-inline">{{ range.name|default('Přihláška na akci '~event.name|default) }}</div>
                                            </strong>
                                        </small>
                                        <strong class="float-right align-middle text-muted"><i class="fas fa-ticket-alt"></i></strong>
                                    {% endblock range_preview_title %}
                                </h5>
                            </div>
                        </a>
                    {% else %}
                        {{ block('range_preview_title') }}
                    {% endif %}
                    <div class="card-body p-3">
                        {% if range.rangeAsText %}
                            <h6 class="card-subtitle mb-2 text-muted"><strong>Rozmezí přihlášek:</strong> {{ range.rangeAsText|default }}</h6>
                        {% endif %}
                        <h6 class="card-subtitle mb-2 text-muted">
                            <strong>Akce:</strong>
                            <a href="{{ path('oswis_org_oswis_calendar_web_event', {'eventSlug': event.slug}) }}" title="{{ event.name }} ({{ event.rangeAsText|default }})">
                                {{ event.shortName }}
                            </a>
                        </h6>
                        {% if event.rangeAsText %}
                            <h6 class="card-subtitle mb-2 text-muted"><strong>Termín akce:</strong> {{ event.rangeAsText|default }}</h6>
                        {% endif %}
                        {% if range.eventParticipantType %}
                            <h6 class="card-subtitle mb-2 text-muted"><strong>Typ přihlášky:</strong> {{ range.eventParticipantType.name }}</h6>
                        {% endif %}
                        {% if range.description %}
                            <div class="mt-2 mb-2">{{ range.description }}</div>
                        {% endif %}
                        {% if range.note %}
                            <div class="text-muted mt-2 mb-2">{{ range.note }}</div>
                        {% endif %}
                        {% if range.rangeActive %}
                            <a href="{{ path('oswis_org_oswis_calendar_web_event_participant_registration', {'eventSlug': event.slug, 'participantType': range.eventParticipantType.slug}) }}">
                                <div class="badge badge-success pt-1 pb-1 pl-2 pr-2 mt-1">Přihlas se nyní!</div>
                            </a>
                        {% else %}
                            <div class="badge badge-dark pt-1 pb-1 pl-2 pr-2 mt-1">Aktuálně neaktivní.</div>
                        {% endif %}
                        {#
                        {% if range.startDateTime and date(range.endDateTime).diff(date(now)).days != 0 %}
                            <div class="badge badge-warning pt-1 pb-1 pl-2 pr-2 mt-1">Zbývá {{ date(range.endDateTime|date).diff(now).days }} dní.</div>
                        {% endif %}
                        {% if range.endDateTime and date(range.startDateTime).diff(date(now)).days != 0 %}
                            <div class="badge badge-warning pt-1 pb-1 pl-2 pr-2 mt-1">Začíná za {{ date(range.startDateTime|date).diff(now).days }} dní.</div>
                        {% endif %}
                        #}

                        <span itemprop="availability" content="http://schema.org/InStock"></span>
                        <div itemprop="validFrom" content="{{ range.startDate|date("Y-m-d\\TH:i:sP")|default }}"></div>
                        <div itemprop="validThrough" content="{{ range.endDate|date("Y-m-d\\TH:i:sP")|default }}"></div>
                    </div>
                    <div class="card-footer row m-0">
                        <div class="col-6 p-0"><strong>Záloha</strong><br>{{ event.deposit(range.eventParticipantType)|default(0) }},-&nbsp;Kč</div>
                        <div class="col-6 p-0">
                            <strong>Celkem</strong><br>
                            <span itemprop="price">{{ event.price(range.eventParticipantType)|default(0) }}</span><span itemprop="priceCurrency" content="CZK">,-&nbsp;Kč</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endif %}