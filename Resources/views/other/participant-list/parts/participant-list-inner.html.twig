<tbody>
<tr {{ participant.deleted ? 'style="background-color:rgba(255,0,0,.3);"' : '' }}>
    <td style="border: 1px solid grey; padding: .3em .6em; text-align: right;">
        {% if participant.deleted %}
            <div class="block small" style="color:red;">
                <strong>❌</strong>&nbsp;smazáno
            </div>
        {% endif %}
        <div class="block small">
            <strong class="badge badge-primary font-1em">{{ participant.id }}</strong> {{ participant.createdAt|date("j. n. Y, H:i") }}
        </div>
        {% if participant.contact.appUser and participant.contact.appUser.activated %}
            <div class="block small" style="color:green;">
                <strong>✔</strong>&nbsp;{{ participant.contact.appUser.activated|date("j. n. Y, H:i") }}
            </div>
        {% else %}
            <div class="block small" style="color:red;">
                <strong>❌</strong>&nbsp;neověřeno
            </div>
        {% endif %}
        <div class="block small">
            ☎ <a href="call:{{ participant.contact.phone }}" target="_blank">{{ participant.contact.phone }}</a>
        </div>
        <div class="block small">
            ✉ <a href="mailto:{{ participant.contact.email }}" target="_blank">{{ participant.contact.email }}</a>
        </div>
    </td>
    <td style="border: 1px solid grey; padding: .3em .6em;">
        <ul>
            {% set listGenderIcon = "👤" %}
            {% if 'male' == participant.contact.gender %}
                {% set listGenderIcon = "👨" %}
            {% elseif 'female' == participant.contact.gender %}
                {% set listGenderIcon = "👩" %}
            {% endif %}
            <li style="list-style-type: '{{ listGenderIcon }}'">
                <strong>{{ participant.contact.name|default }}</strong>
            </li>
            <li style="list-style-type: '📅'">
                <span class="block small"><strong>{{ participant.event.shortName|default }}</strong></span>
            </li>
            <li style="list-style-type: '🎫'">
                <span class="block small"><strong>{{ participant.regRange.shortName|default }}</strong></span>
            </li>
            {% for note in participant.notes %}
                {% if note.textValue|length > 0 %}
                    <li style="list-style-type: '📝'">
                        <span class="block small">{{ note.textValue }}</span>
                    </li>
                {% endif %}
            {% endfor %}
        </ul>
    </td>
    <td style="border: 1px solid grey; padding: .3em .6em; font-size: small;">
        <ul>
            {% for participantFlagGroup in participant.flagGroups|filter(flagGroup => flagGroup.participantFlags|length > 0) %}
                <div>
                    {% for index, participantFlag in participantFlagGroup.participantFlags %}
                        {% set badgeColorString = participantFlag.flag.color
                            ? 'background-color:'~participantFlag.flag.color~';color:'~participantFlag.flag.foregroundColor~';'
                            : '' %}
                        <div class="badge badge-info smaller" title="{{ participantFlag.flag.name|default }}" style="{{ badgeColorString }}">
                            {{ participantFlag.flag.shortName|default }}
                            {% if participantFlag.flagRange.price|default(0) != 0 %}
                                <div class="badge badge-danger">
                                    <strong>
                                        {{ participantFlag.flagRange.price > 0 ? '+' : '' }}{{ participantFlag.flagRange.price }},- Kč
                                    </strong>
                                </div>
                            {% endif %}
                            {% if participantFlag.textValue|default|length > 0 %}
                                <div class="badge badge-warn small">
                                    {{ participantFlag.textValue }}
                                </div>
                            {% endif %}
                        </div>
                    {% endfor %}
                </div>
            {% endfor %}
        </ul>
    </td>
    <td style="border:1px solid grey; padding:.3em .6em; text-align:right;color:{{ participant.remainingPrice|default(0) == 0 ? 'green' : 'red' }}">
        <div class="block">
            <strong>💰 {{ participant.paidPrice|default(0) }},-&nbsp;Kč</strong>
        </div>
        <div class="block">
            z&nbsp;{{ participant.price|default(0) }},-&nbsp;Kč
        </div>
        <div class="block small">
            zbývá {{ participant.remainingPrice|default(0) }},-&nbsp;Kč
            {% if participant.remainingPrice|default(0) > 0 %}
                <strong style="color: orange;">★</strong>
            {% elseif participant.remainingPrice|default(0) < 0 %}
                <strong style="color: red;">⚠</strong>
            {% else %}
                <strong style="color: green;">✔</strong>
            {% endif %}
        </div>
        {% if participant.price != 0 %}
            {% set paidPercentage = participant.paidPricePercentage * 100 %}
            {% set paidColor = participant.remainingPrice > 0 ? 'danger' : 'success' %}
            {% set paidColor = participant.remainingDeposit > 0 ? paidColor : 'warning' %}
            <div class="progress">
                <div class="progress-bar progress-bar-striped bg-{{ paidColor }}" role="progressbar" style="width: {{ paidPercentage }}%"
                     aria-valuenow="{{ paidPercentage }}" aria-valuemin="0" aria-valuemax="100">
                    {{ paidPercentage }} %
                </div>
            </div>
        {% endif %}
    </td>
</tr>
</tbody>

